(()=>{"use strict";var e={317(e){e.exports=require("child_process")},398(e){e.exports=require("vscode")}},t={};function o(s){var n=t[s];if(void 0!==n)return n.exports;var i=t[s]={exports:{}};return e[s](i,i.exports,o),i.exports}var s={};(()=>{var e=s;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=function(e){console.log("Atomic Tree Engine is active!");const o=new a(e.extensionUri);e.subscriptions.push(t.window.registerWebviewViewProvider("atomic-tree-dashboard",o)),e.subscriptions.push(t.commands.registerCommand("atomic-tree.startWorkload",()=>{!function(e,o){if(i)return;const s=t.workspace.workspaceFolders;let r=t.workspace.getConfiguration("atomicTree").get("backendPath");if(r&&""!==r.trim()?(s&&s.length>0&&(r=r.replace("${workspaceFolder}",s[0].uri.fsPath)),console.log(`Using custom backend: ${r}`)):(r=t.Uri.joinPath(e.extensionUri,"bin","atomic-engine.exe").fsPath,console.log(`Using bundled backend: ${r}`)),s)try{const e=s[0].uri.fsPath;i=(0,n.spawn)(r,[],{cwd:e}),i.stdout?.on("data",e=>{const t=e.toString();console.log(`Backend Out: ${t}`);const s=t.split("\n");for(const e of s)if(e.trim())try{const t=JSON.parse(e);o.postMessage(t)}catch(e){}}),i.stderr?.on("data",e=>{console.error(`Backend Err: ${e}`)}),i.on("close",e=>{console.log(`Backend exited with code ${e}`),i=void 0,t.window.showErrorMessage(`Atomic Engine died (Exit Code: ${e})`)})}catch(e){t.window.showErrorMessage("Failed to start Atomic Engine backend")}else t.window.showErrorMessage("Open a folder to start Atomic Engine")}(e,o),r({method:"runWorkload",params:{type:"insert",count:100}}),t.window.showInformationMessage("Atomic Tree Workload Started")})),e.subscriptions.push(t.commands.registerCommand("atomic-tree.stopWorkload",()=>{r({method:"stopWorkload"})})),e.subscriptions.push(t.commands.registerCommand("atomic-tree.simulateCrash",()=>{r({method:"simulateCrash"}),t.window.showWarningMessage("Backend Crash Simulated!")}))},e.deactivate=function(){i&&i.kill()};const t=o(398),n=o(317);let i;function r(e){i&&i.stdin&&i.stdin.write(JSON.stringify(e)+"\n")}class a{constructor(e){this._extensionUri=e}resolveWebviewView(e){this._view=e,e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},e.webview.html=this._getHtmlForWebview(e.webview)}postMessage(e){this._view&&this._view.webview.postMessage(e)}_getHtmlForWebview(e){return'<!DOCTYPE html>\n        <html lang="en">\n        <head>\n            <meta charset="UTF-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1.0">\n            <title>Atomic Tree Dashboard</title>\n            <style>\n                body { font-family: sans-serif; padding: 10px; }\n                .card { background: var(--vscode-editor-background); border: 1px solid var(--vscode-widget-border); padding: 10px; margin-bottom: 10px; }\n            </style>\n        </head>\n        <body>\n            <div class="card">\n                <h3>Throughput</h3>\n                <div id="chart-throughput" style="height: 100px;">Waiting for data...</div>\n            </div>\n            <script>\n                // Listen for messages from extension\n                window.addEventListener(\'message\', event => {\n                    const message = event.data;\n                    document.getElementById(\'chart-throughput\').innerText = JSON.stringify(message, null, 2);\n                });\n            <\/script>\n        </body>\n        </html>'}}})();var n=exports;for(var i in s)n[i]=s[i];s.__esModule&&Object.defineProperty(n,"__esModule",{value:!0})})();